<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>C√°lculo de Generadores de Ozono</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header class="header">
    <img src="images/logo.jpg" alt="banner" class="banner">
    <h1 id="mainTitle">C√°lculo de Sistemas de Ozono</h1>
  </header>

  <main class="container">
    <!-- LOGIN -->
    <section id="loginSection" class="card">
      <h2>Control de Acceso</h2>
      <div class="inputRow">
        <label>Usuario</label>
        <input id="username" type="text" placeholder="usuario">
      </div>
      <div class="inputRow">
        <label>Contrase√±a</label>
        <input id="password" type="password" placeholder="contrase√±a">
      </div>
      <div class="actions">
        <button id="loginBtn" class="btn primary">Entrar</button>
        <p id="loginMsg" class="muted"></p>
      </div>
    </section>

    <!-- APP -->
    <section id="appSection" class="hidden">
      <div class="controls card">
        <hr>
        <div class="segmented" role="tablist" aria-label="Modo">
          <button class="segBtn active" data-mode="water" role="tab" aria-selected="true">Ozono Agua</button>
          <button class="segBtn" data-mode="air" role="tab" aria-selected="false">Ozono Aire</button>
        </div>
        <hr/>

        <!-- =========================
             SECCI√ìN OZONO AGUA
        ========================== -->
        <div id="waterControls" class="panel">
          <h3>Par√°metros de dise√±o (Agua)</h3>

          <!-- üîπ Fila 0: Tipo de instalaci√≥n -->
          <div class="formRow0">
            <div>
              <label for="tipoInst">Tipo de Instalaci√≥n</label>
              <select id="tipoInst">
                <option value="">-- Seleccionar Tipo de Instalaci√≥n --</option>
                <option value="Agua Potable">Agua Potable</option>
                <option value="Aguas Residuales">Aguas Residuales</option>
              </select>
            </div>
          </div>

          <!-- üîπ Fila 1: Bomba, cantidad y caudal de recirculaci√≥n -->
          <div class="formRow1">
            <div>
              <label for="pumpSelect">Bomba de recirculaci√≥n</label>
              <select id="pumpSelect" aria-label="Bomba de recirculaci√≥n">
                <option value="">-- Seleccionar --</option>
                <option value="CM 3-5">CM 3-5</option>
                <option value="CM 5-7">CM 5-7</option>
                <option value="CM 10-1">CM 10-1</option>
                <option value="CM 10-2">CM 10-2</option>
                <option value="MATRIX/A 5-6T">MATRIX/A 5-6T</option>
              </select>
            </div>
            <div>
              <label for="npump">Cantidad de bombas (paralelo)</label>
              <input id="npump" type="number" min="1" value="1">
            </div>
            <div>
              <label for="Qr">Caudal de recirculaci√≥n (m¬≥/h)</label>
              <input id="Qr" type="number" min="0" step="any">
            </div>
          </div>

          <!-- üîπ Fila 2: Tabla de bomba -->
          <div id="pumpTableContainer" class="card small hidden" aria-live="polite">
            <h3>Datos de la bomba seleccionada</h3>
            <div id="pumpTableScroll">
              <table id="pumpTable">
                <thead>
                  <tr>
                    <th>Consumo (Watts)</th>
                    <th>Velocidad (RPM)</th>
                    <th>Caudal (m¬≥/h)</th>
                    <th>Altura (m)</th>
                    <th>P. trabajo @-22/55 ¬∫C (Bar)</th>
                    <th>P. Descarga (Bar)</th>
                  </tr>
                </thead>
                <tbody><tr><td colspan="6" class="muted">Seleccione una bomba</td></tr></tbody>
              </table>
            </div>
            <div class="actions hidden" id="pumpDownloadContainer">
              <button id="downloadPumpPDF" class="btn primary">Descargar Ficha T√©cnica</button>
            </div>
          </div>

          <!-- üîπ Fila 3: Volumen, caudal de consumo y concentraci√≥n -->
          <div class="formRow3">
            <div>
              <label for="Vr">Volumen del recipiente (Litros)</label>
              <input id="Vr" type="number" min="0" step="any">
            </div>
            <div>
              <label for="Qc">Caudal de consumo en producci√≥n (m¬≥/h)</label>
              <input id="Qc" type="number" min="0" step="any">
            </div>
            <div>
              <label for="C">Concentraci√≥n objetivo (PPM)</label>
              <input id="C" type="number" min="0" step="any">
            </div>
          </div>

          <!-- üîπ Contaminantes (solo si Aguas Residuales) -->
          <div id="contaminantes" class="hidden">
            <div class="cont-item">
              <label>Fe (g/m3)</label>
              <input id="Fe" type="number" step="any" value="0">
            </div>
            <div class="cont-item">
              <label>Mn (g/m3)</label>
              <input id="Mn" type="number" step="any" value="0">
            </div>
            <div class="cont-item">
              <label>DQO (g/m3)</label>
              <input id="DQO" type="number" step="any" value="0">
            </div>
            <div class="cont-item">
              <label>DBO (g/m3)</label>
              <input id="DBO" type="number" step="any" value="0">
            </div>
            <div class="muted">
              Elementos contaminantes (gr/h): <span id="CmVal">0</span>
            </div>
          </div>

          <!-- üîπ Factores de seguridad -->
          <div id="factoresSeguridad" class="card">
            <div class="factores-grid">
              <div>
                <p class="label">Factor de Seguridad por Transferencia de Masa</p>
                <p id="FstmVal" class="big">0.9</p>
              </div>
              <div>
                <p class="label">Factor de Seguridad por Rendimiento de Generaci√≥n</p>
                <p id="FsrgVal" class="big">0.8</p>
              </div>
              <div>
                <p class="label">Factor de Seguridad General de Dise√±o</p>
                <p id="FsgdVal" class="big">1.5</p>
              </div>
            </div>
          </div>

          <!-- üîπ Botones -->
          <div class="actions">
            <button id="calcWater" class="btn primary">Calcular</button>
            <button id="resetWater" class="btn">Reset</button>
          </div>

          <!-- üîπ Resultados -->
          <div id="waterResults" class="results hidden card">
            <h4>Resultados</h4>
            <div class="cols3">
              <div>
                <p class="label">Tiempo de tratamiento completo vaso principal (min)</p>
                <p id="Tt" class="big"></p>
              </div>
              <div>
                <p class="label">Tiempo de recirculaci√≥n en tanque (min/h)</p>
                <p id="Tr" class="big"></p>
              </div>
              <div>
                <p class="label">Producci√≥n m√≠nima esperada (g/h)</p>
                <p id="Pe" class="big"></p>
              </div>
            </div>
            <h3 class="green">Producci√≥n requerida (g/h):</h3>
            <h3 id="Pr" class="big green"></h3>
          </div>
          <div id="sistemasWater" class="cardsGrid"></div>
        </div>

        <!-- =========================
             SECCI√ìN OZONO AIRE
        ========================== -->
        <div id="airControls" class="panel hidden">
          <h3>Par√°metros de dise√±o (Aire)</h3>
          <div class="formGrid">
            <label>Generador</label>
            <select id="genSelect"></select>

            <label>Volumen del espacio a tratar</label>
            <input id="Vei" type="number" min="0" step="any">

            <label>Unidad</label>
            <div id="airUnitButtons" class="segmented" role="group" aria-label="Unidad">
              <button type="button" class="segBtn active" data-unit="m3">Metros C√∫bicos (m¬≥)</button>
              <button type="button" class="segBtn" data-unit="L">Litros (L)</button>
            </div>

            <label>Caudal gas (L/min)</label>
            <input id="Qg" type="number" step="any">

            <label>Producci√≥n (g/h)</label>
            <input id="PrAir" type="number" step="any">

            <label>Factor de Intercambio (fi)</label>
            <input id="fi" type="range" min="0.5" max="1.2" step="0.01" value="0.8">
            <div class="muted small">Valor fi: <span id="fiVal">0.8</span></div>
          </div>

          <div class="actions">
            <button id="calcAir" class="btn primary">Calcular</button>
            <button id="resetAir" class="btn">Reset</button>
          </div>

          <div id="airResults" class="results hidden card">
            <h4>Resultados</h4>
            <div class="cols3">
              <div>
                <p class="label">Concentraci√≥n (g/m3)</p>
                <p id="Co" class="big"></p>
              </div>
              <div>
                <p class="label">Constante K</p>
                <p id="kVal" class="big">1.65</p>
              </div>
              <div>
                <p class="label">Factor de intercambio (fi)</p>
                <p id="fiOut" class="big"></p>
              </div>
            </div>

            <h4>Tabla de evoluci√≥n y gr√°fico</h4>
            <div id="tableAir" class="tableWrap"></div>
            <canvas id="chartAir" height="200"></canvas>
          </div>
        </div>
      </div>

      <footer class="footer card">
        <p class="muted">¬© 2025 PID Medioambiental, S.L. ‚Ä¢ J. Aguilar & G. Balanguero ‚Ä¢ Rev. 2.0</p>
      </footer>
    </section>
  </main>

  <script src="js/script.js"></script>
</body>
</html>
